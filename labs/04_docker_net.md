# Лабораторная работа 4

**Тема:** Сетевое взаимодействие контейнеров Docker

## 1. Цель работы

Закрепить основные принципы работы сетей в Docker:

* понять назначение стандартных сетей (`bridge`, `host`, `none`)
* научиться создавать собственные мостовые сети
* научиться публиковать порты контейнеров для доступа извне
* организовать взаимодействие нескольких контейнеров между собой по имени, а не по IP

---

## 2. Теория (чтобы не листать)

1. **Сеть `bridge`**

   * внутренняя мостовая сеть Docker по умолчанию
   * контейнеры в этой сети получают внутренние IP-адреса
   * могут обращаться друг к другу по IP и по имени контейнера
   * для доступа извне требуется проброс портов

2. **Сеть `host`**

   * контейнер использует сеть хоста напрямую
   * общие порты: сервис в контейнере слушает тот же порт, что и на хосте
   * сетевой изоляции между хостом и контейнером нет

3. **Сеть `none`**

   * у контейнера нет сетевых интерфейсов, кроме loopback
   * контейнер не имеет доступа к другим контейнерам и внешней сети

4. **Пользовательская bridge-сеть**

   * создается пользователем отдельно от сети по умолчанию
   * позволяет группировать контейнеры в изолированные логические сети
   * внутри такой сети контейнеры также могут обращаться друг к другу по имени

5. **Публикация портов**

   * сопоставление порта внутри контейнера с портом на хосте
   * используется для доступа к веб-сервисам и другим приложениям снаружи

---

## 3. Задания

### Задание 1. Исследование сетей Docker на хосте

1. Определить, какие сети созданы в Docker по умолчанию на вашей машине.

   * В отчете перечислить найденные сети (минимум: `bridge`, `host`, `none`)

2. Для сети по умолчанию типа `bridge`:

   * определить ее подсеть (диапазон адресов) и адрес шлюза
   * кратко описать, для чего используется эта сеть

3. Кратко описать назначение трех стандартных сетей:

   * `bridge`
   * `host`
   * `none`

---

### Задание 2. Публикация порта контейнера

1. Выбрать любой простой веб-сервис в контейнере, например:

   * готовый образ веб-сервера (nginx, httpd и т.п.)
   * или свое небольшое веб-приложение (если уже есть из предыдущих работ(кликалка ракет))

2. Запустить контейнер так, чтобы:

   * внутри контейнера приложение слушало внутренний порт (например, 80 или 8000)
   * на хосте этот сервис был доступен по другому порту (например, 8080)

3. Проверить, что веб-сервис доступен:

   * через браузер по адресу `http://localhost:<порт_хоста>`
   * или с помощью любого HTTP-клиента

---

### Задание 3. Пользовательская bridge-сеть и взаимодействие по имени

1. Создать **пользовательскую мостовую сеть** (bridge):

   * указать осмысленное имя (например, `my-app-net`)
   * при необходимости можно задать свой диапазон адресов, но это не обязательно

2. Поднять в этой сети **два контейнера**:

   * условный контейнер `db`:

     * внутри должен работать сервис, к которому можно подключиться по TCP
     * это может быть:

       * база данных (MySQL/PostgreSQL/Redis)
       * простой HTTP-сервер
       * любой другой сетевой сервис, с которым вы умеете взаимодействовать

   * условный контейнер `web`:

     * контейнер-клиент, из которого можно обратиться к `db`
     * внутри должен быть установлен клиент/утилита, позволяющая выполнить запрос:

       * это может быть `curl`, `ping`, клиент к БД и т.п.

3. Настроить взаимодействие:

   * контейнер `web` должен обращаться к сервису в `db` **по имени контейнера**, а не по IP-адресу
   * продемонстрировать успешный запрос:

     * например, ping по имени,
     * подключение к БД по имени хоста,
     * HTTP-запрос вида `http://db:порт`.

4. Убедиться, что имя контейнера действительно используется как адрес, а не «случайный IP»:

   * в отчете явно указать имя контейнера
   * при желании можно показать, что IP-адрес, отображаемый в настройках, отличается от имени и может измениться

---

### Задание 4 Изоляция контейнера

1. Запустить третий контейнер, который **не подключен** к созданной пользовательской сети:

   * либо в сети по умолчанию (`bridge`)
   * либо вообще без сети (`none`)

2. Попробовать из этого контейнера обратиться к сервису `db`:

   * по имени контейнера `db`
   * при желании по IP

3. Наблюдать, что доступ невозможен (ошибка разрешения имени/подключения).

---

## Требования к отчету

Отчет может быть оформлен на гите/в ворде:

**Ход работы**
   Для каждого задания:
   * Кратко описать, **что именно было сделано**:

     * какие сети создавались
     * какие контейнеры запускались и с какими ролями
     * как проверялась работа сервисов
   * Приложить скриншоты

**Выводы**

   * чем отличаются стандартные сети Docker друг от друга
   * зачем создавать собственные сети
   * как организовать взаимодействие контейнеров по имени
