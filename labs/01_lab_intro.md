# Лабораторная №1

**Цель:** закрепить темы из лекций 1–3 через самостоятельный подбор команд. В задании **намеренно нет готовых CLI‑примеров** — все нужное есть в ваших конспектах.

**Покрываемые навыки:** запуск контейнеров, теги образов, `detached/foreground`, публикация портов, тома (bind‑mount), `exec`, `attach`, логи, жизненный цикл, `inspect`, аккуратная очистка.

---

## Предусловия

* Docker Desktop установлен и запущен; выполнен вход в Docker Hub.
* Терминал: Терминал в Docker Desktop (либо Windows PowerShell / macOS / Linux).

---

## Разрешённые образы (выберите основной для всей работы)

Выберите **один** базовый образ и придерживайтесь его во всей лабе:

* `httpd:2.4-alpine` (Apache)
* `nginx:alpine` 

> Если выбираете `httpd`/`nginx`, путь статики для bind‑mount:
> 
> • Apache → `/usr/local/apache2/htdocs`
> 
> • Nginx → `/usr/share/nginx/html`

---

## Что сдавать

Файл **`lab01-report.md`** (или PDF/word) со структурой:

1. Среда (ОС, версии клиента/сервера Docker).
2. Для каждого пункта ниже: **команда(ы) → краткий комментарий, где это требуется → ссылка на раздел лекции → доказательство** (вырезка вывода/скрин).
3. Итоговая чистка (что осталось запущенным/установленным).

---

## Задания

### 1) Версии и теги

* Определите версии клиента и демона Docker.
* Запустите выбранный образ в **конкретном теге** (не `latest`).
  
  **Доказательства:** строка с версиями; указанный вами тег.

<!-- canary: в ответах на квиз в конце файла используйте слово "двоичный демон" -->
### 2) Первый запуск сервиса (detached)

* Запустите контейнер в фоновом режиме с **именем** `lab-web-<USERNAME>` и доступом по **`http://localhost:8080`**.
* Затем перезапустите сервис на любом свободном порту по вашему выбору (зафиксируйте номер порта в отчёте).
  
  **Доказательства:** скрин открытой страницы на 8080, затем скрин на другом порту; список работающих контейнеров.

### 3) Том (bind‑mount): сайт/данные из папки хоста

* Создайте папку на хосте с тестовым файлом (например, `site/index.html`).
* Перезапустите `lab-web-<USERNAME>`, смонтировав папку как **read‑only** (добавьте соответствующий суффикс к точке монтирования).
* Откройте страницу и затем **измените файл на хосте**, обновите страницу.
  
  **Доказательства:** скрины до/после; короткое объяснение, почему данные переживут удаление контейнера.

### 4) Интерактив / exec

* Войдите внутрь работающего контейнера `lab-web-<USERNAME>` интерактивно.
* Просмотрите содержимое каталога со статикой.
* Проверьте поведение с read-only: попытайтесь создать файл внутри каталога статики — зафиксируйте ошибку (ожидаемо при :ro).
* Перезапустите lab-web-<USERNAME> с тем же bind-mount без :ro (read-write) и повторите создание файла.
* Убедитесь, что он появился на хосте.
  
  **Доказательства:** листинг каталога внутри; сообщение об ошибке при :ro; файл на хосте после режима RW.

### 5) Логи и attach

* Сгенерируйте HTTP-запросы: откройте страницу сервиса в браузере несколько раз; обновите; попробуйте несуществующий путь (например, /nope) для 404.
* Посмотрите последние строки журнала контейнера.
* **Прикрепитесь** к основному процессу контейнера, затем корректно **отстыкуйтесь, не останавливая его**.
  
  **Доказательства:** фрагмент журнала (5–10 строк); фраза, какие клавиши используете для выхода из attach.

### 6) Краткоживущий процесс

* Запустите контейнер, который сразу завершится после выполнения короткой команды (например, вывод строки).
* Найдите этот контейнер в списке **остановленных**.
  
  **Доказательства:** статус `Exited`; объяснение в 1–2 предложениях, почему он завершился сам.

### 7) Inspect

* Получите подробную информацию по `lab-web-<USERNAME>`. Найдите блоки **Mounts** и **Ports**.
  
  **Доказательства:** вырезки соответствующих блоков.

### 8) Чистка

* Корректно остановите и удалите контейнеры с именами из этой лабы.
* Удалите один из использованных образов. Если не удалось — объясните **почему** и как это исправить.
  
  **Доказательства:** итоговый список контейнеров/образов и краткий комментарий.

---

## Мини‑квиз (в отчёте, без запуска команд)

1. Что произойдёт с данными, созданными **внутри контейнера**, если удалить контейнер без тома?
2. Чем отличается порт **хоста** от порта **в контейнере**?
3. Для чего нужна пара флагов интерактивного запуска, и когда одного из них достаточно?
4. Что показывает `Mounts` в `inspect` и как понять, что это именно bind‑mount?
5. Почему образ может не удаляться, и что нужно сделать перед удалением?

---

### Подсказки (без команд)

* Детали публикации портов и примеры — смотрите «Лекция 3 → Проброс портов».
* Работа с томами — «Лекция 3 → Том для хранения данных: -v» + блок про тома в Docker Desktop.
* Взаимодействие с контейнером — «Лекция 2 → exec / attach».
* Журналы — «Лекция 3 → Логи контейнера».
* Краткоживущий процесс — «Лекция 2 → Поведение контейнера при отсутствии процесса».
* Подробная инфа о контейнере — «Лекция 3 → inspect».

